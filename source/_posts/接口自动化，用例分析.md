---
title: 接口自动化，用例分析
date: 2016-12-20 16:09:08
tags:
- 自动化
- 用例
categories:
- 自动化
---

用例分析
====
<!--more-->
## 基础用例

### request params

#### 可选项
针对入参中的参数，对可选参数与必选参数进行组合请求，关注结果；

#### 健壮性
传入参数值包含大量非正常数据，包括特殊字符，无意义串

#### 安全性
待补充

### response data

#### timespend
请求接口的用时，可做为参考

#### 对比(diff)
对返回结果中，选取一级key值和二级key值，与正确返回值中的对应项进行对比；
确保无随意的增删字段产生

#### 检查项
根据业务中的统一规则，对返回数据中的必要项目进行检查：
包括：

|功能|结果|
|----|----|
|status_code|200|
|所有key|小写|
|一级key|标准4个|
|returncode|0|
|结果中的url链接|2××、3××|




## 业务用例(灰盒测试代码)

### 业务情景的基础用例覆盖
针对产品需求，对业务逻辑写测试代码，其中有判断条件，基于一定数据环境；

### 多数据覆盖
因无法修改源接口返回数据源（另外，修改起来代价太大，各业务方都有数据），所以
尽可能的对线上数据进行遍历操作

#### 自动生成用例代码
针对入参为城市、省份、品牌、车型、车系等可控数据，进行大范围\全范围遍历

通过对__init__的覆写，来继承已完成的测试类；

#### 自动化生成报告代码
使用HtmlTestRunner.py生成报告

但因为如果用上面生成大范围用例，就可能出现大量的测试类，这时候需要将上千个测试类组装
到一起进行生成报告




## 页面组装
希望把以上的功能集成至前端页面中，通过点击按钮的方式自动操作

### 组织结构设计
将执行脚本、生成用例脚本、生成报告脚本做目录区分

对每一次测试执行结果都进行保存

### celery应用
因为生成报告时间长、无需立即查看报告状态这些特点，可将生成报告做成异步

## 线上巡查

